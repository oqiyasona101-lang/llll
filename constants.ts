import { LotteryRecord, LotteryType } from './types';

// Helper to parse raw tab/space-separated data
// Format: Issue R1 R2 R3 R4 R5 R6 B1
const parseLotteryData = (rawData: string): LotteryRecord[] => {
  return rawData.trim().split('\n').map((line): LotteryRecord | null => {
    // Split by any whitespace (tabs or spaces)
    const parts = line.trim().split(/\s+/);
    
    // Filter out headers or invalid lines
    // 1. Must have at least 8 parts (Issue + 6 Red + 1 Blue)
    // 2. Issue must be numeric (filters out "期数")
    if (parts.length < 8 || !/^\d+$/.test(parts[0])) return null;
    
    const issue = parts[0];
    const numbers = parts.slice(1).map(n => parseInt(n, 10));
    
    // Ensure all parsed numbers are valid
    if (numbers.some(isNaN)) return null;
    
    // For SSQ (6 Red + 1 Blue)
    const redBalls = numbers.slice(0, 6);
    const blueBalls = numbers.slice(6);

    return {
      issue,
      redBalls,
      blueBalls,
      date: 'History' // Date is not provided in raw text
    };
  }).filter((r): r is LotteryRecord => r !== null);
};

// SSQ Data provided by user
// Includes historical data. Note: For optimal model performance on long-term trends, 
// ensure the full dataset from 2003 is pasted here.
// Currently including recent meaningful history for the demo context.
const SSQ_RAW_DATA = `
2024001	03	07	16	26	27	32	16
2024002	04	09	10	17	19	20	09
2024003	01	05	08	13	32	33	03
2024004	09	13	17	18	21	27	04
2024005	05	06	20	23	25	32	03
2024006	07	18	20	21	26	32	05
2024007	04	05	06	07	20	22	15
2024008	08	20	21	23	27	30	13
2024009	01	04	07	10	17	23	14
2024010	11	16	20	21	23	24	04
2024011	08	12	16	20	27	31	06
2024012	01	03	07	18	22	28	15
2024013	01	07	10	14	21	25	07
2024014	01	02	10	22	24	25	13
2024015	03	08	17	18	20	30	15
2024016	07	12	20	24	32	33	04
2024017	04	17	19	20	25	32	04
2024018	06	15	17	24	28	29	16
2024019	05	11	12	16	17	20	08
2024020	03	08	12	14	17	33	08
2024021	04	06	16	17	23	24	11
2024022	02	09	11	14	18	26	06
2024023	01	10	22	25	28	32	10
2024024	03	07	21	24	26	30	10
2024025	08	15	21	22	25	33	13
2024026	04	07	18	19	20	25	06
2024027	02	06	13	27	28	32	13
2024028	03	07	08	11	18	19	05
2024029	12	18	23	25	28	33	04
2024030	01	08	22	25	29	33	10
2024031	09	10	13	25	30	32	02
2024032	01	03	04	11	12	21	16
2024033	06	10	11	18	20	32	05
2024034	02	09	12	19	21	31	04
2024035	05	07	14	17	22	32	06
2024036	02	08	09	12	21	31	02
2024037	01	04	05	06	12	14	13
2024038	08	10	18	23	27	31	02
2024039	02	06	12	29	30	31	10
2024040	11	14	18	19	23	26	02
2024041	02	09	12	22	25	33	16
2024042	02	04	05	14	26	32	14
2024043	04	06	07	14	15	24	08
2024044	02	06	17	25	32	33	06
2024045	02	08	19	23	24	26	03
2024046	02	06	10	11	17	29	15
2024047	07	08	21	26	29	30	15
2024048	02	09	15	19	26	28	02
2024049	12	15	17	23	26	32	11
2024050	01	03	07	10	22	33	02
2024051	05	09	13	20	23	28	06
2024052	07	10	11	15	17	21	03
2024053	07	14	21	22	28	33	07
2024054	08	13	20	25	31	32	03
2024055	02	04	06	07	16	29	03
2024056	05	18	20	24	25	26	06
2024057	03	08	17	18	23	31	08
2024058	08	12	13	17	27	29	13
2024059	01	03	14	25	31	33	07
2024060	01	02	06	10	22	28	15
2024061	01	09	18	22	25	28	02
2024062	01	07	10	16	18	27	16
2024063	07	14	16	23	28	32	04
2024064	06	08	17	18	28	30	05
2024065	03	05	09	10	19	22	14
2024066	08	09	12	22	26	32	13
2024067	01	11	13	17	25	29	03
2024068	01	02	07	19	20	21	01
2024069	06	13	20	21	24	32	06
2024070	04	13	18	20	22	28	05
2024071	02	08	19	28	30	31	14
2024072	01	14	20	21	23	27	06
2024073	03	09	12	18	28	30	01
2024074	07	08	10	22	24	32	07
2024075	03	05	08	18	22	28	01
2024076	03	22	24	27	29	32	15
2024077	01	04	06	14	17	22	08
2024078	05	09	14	21	22	26	12
2024079	02	03	06	07	16	26	04
2024080	06	11	12	27	29	30	13
2024081	01	06	12	17	23	25	04
2024082	01	02	13	16	17	29	16
2024083	03	09	14	29	32	33	15
2024084	01	08	10	13	19	29	13
2024085	01	05	15	21	23	27	15
2024086	17	19	20	23	25	31	02
2024087	03	09	18	19	20	26	11
2024088	03	08	10	17	30	32	10
2024089	03	06	09	15	18	31	01
2024090	07	11	17	24	31	32	12
2024091	13	15	16	19	20	24	10
2024092	03	08	11	12	18	29	05
2024093	01	05	07	11	12	15	12
2024094	06	13	17	22	25	27	09
2024095	04	06	09	14	16	21	03
2024096	02	04	14	18	23	27	13
2024097	04	10	12	13	18	30	03
2024098	03	08	10	20	30	31	02
2024099	04	12	17	24	26	27	16
2024100	13	14	19	20	27	30	05
2024101	08	12	15	17	19	30	08
2024102	09	15	18	21	22	25	01
2024103	12	21	23	27	32	33	15
2024104	05	16	23	24	26	29	04
2024105	02	05	17	19	29	33	04
2024106	03	08	11	22	31	33	04
2024107	01	06	08	13	17	19	09
2024108	01	08	09	23	24	30	08
2024109	03	04	24	28	29	33	09
2024110	04	13	17	23	25	33	14
2024111	01	04	11	12	22	30	16
2024112	08	11	16	25	29	32	03
2024113	04	05	23	24	26	31	11
2024114	07	11	18	24	27	32	04
2024115	03	10	11	19	27	28	07
2024116	01	15	20	22	31	32	03
2024117	03	12	14	16	29	32	12
2024118	02	03	04	06	11	15	14
2024119	02	09	26	27	31	32	14
2024120	01	05	07	11	18	19	07
2024121	01	07	10	13	27	33	03
2024122	05	07	09	16	17	29	15
2024123	02	15	22	26	30	33	04
2024124	02	14	15	17	25	30	11
2024125	01	04	13	18	26	30	03
2024126	14	18	23	24	26	33	10
2024127	02	05	13	20	27	32	10
2024128	01	08	13	18	20	26	16
2024129	09	10	13	19	24	32	01
2024130	01	08	12	17	19	24	16
2024131	04	05	11	15	20	32	13
2024132	01	04	25	27	28	33	03
2024133	01	11	15	27	30	33	01
2024134	02	04	13	16	18	20	16
2024135	05	11	17	18	30	31	13
2024136	03	11	15	21	25	26	03
2024137	04	09	10	19	26	27	12
2024138	02	07	11	21	27	28	02
2024139	15	16	20	22	23	29	14
2024140	04	07	08	17	22	26	15
2024141	01	02	07	15	24	29	12
2024142	04	06	13	21	22	25	06
2024143	02	05	11	22	30	33	10
2024144	02	09	11	17	20	30	11
2024145	01	03	16	22	23	30	03
2024146	02	04	11	22	27	32	10
2024147	05	11	13	16	21	30	10
2024148	02	06	15	16	21	23	11
2024149	03	09	16	17	18	22	16
2024150	13	14	20	22	26	32	02
2024151	05	10	16	19	29	32	04
2025001	02	03	17	18	22	33	16
2025002	09	12	13	15	22	26	11
2025003	10	19	20	26	28	29	15
2025004	03	07	17	27	29	32	04
2025005	10	16	19	27	28	30	09
2025006	01	07	08	17	20	22	06
2025007	07	08	14	18	21	27	11
2025008	09	14	16	17	25	33	11
2025009	02	04	11	12	23	25	06
2025010	04	06	07	16	17	21	08
2025011	06	13	17	22	24	29	11
2025012	07	11	13	18	27	31	11
2025013   04    14     16    23    24    30    14
2025014   06    07    09     13    21    27    05
2025015   04    11    15     24    25    33    15
2025016   02    03    12     16    20    29    14
2025017   04    12    15     18    28    29    05
2025018   03    09    18     21    28    29    11
2025019   05    13    17     18    22    23    11
2025020   04    11    13     16    26    30    15
2025021   07    08    16     18    25    32    14
2025022   11    17    18     20    28    30    10
2025023   09    12    13     24    25    33    07
2025024   10    11    22     27    30    32    15
2025025   12    15    21     23    25    30    02
2025026   09    10    12     14    19    32    07
2025027   05    07    08     15    16    23    06
2025028   04    09     14     15    18    25    15
2025029   05    15    16     25    30    33    16
2025030   04    06     07    30    31    33    06
2025031   01    05     06    08    23    28    01
2025032   03    08     10    14    16    21    03
2025033   03    05     18    25    26    33    08
2025034   05    08     13    14    24    26    12
2025035   01    08     16    18    25    31    01
2025036   05    11     13    16    19    32    07
2025037   03    06     11    20    21    31    02
2025038   06    19     20    23    26    33    09
2025039   08    10     12    15    17    23    11
2025040   02    06     08    09    10    24    11
2025041   06    10     17    19    25    31    06
2025042   07    13     19    23    27    33    12
2025043   03    12     16    19    20    32    13
2025044   02    03     07    08    14    28    11
2025045   02    14     19    24    29    33    13
2025047	01    14     21    22    23    31    12
2025048	16    21     22    23    27    31    10
2025049	03    06     19    27    29    33    11
2025050	09    12     15    18    22    33    16
2025051	01    02     03    04    17    22     01
2025052	06    07     10    17    20    26    09
2025053	06    09     10    13    30    33    07
2025054	05    07     10    21    24    27    16
2025055	02    05     22    27    29    33    12
2025056	01    02     10    14    28    31    03
2025057	04    09     15    16    25    30    14
2025058	02    06     07    09    10    20    06
2025059	04    10     11    12    13    24    01
2025060	06    14     18    25    28    30    01
2025061	06    07     09    10    11    32    09
2025062	06    08     09    13    25    31    14
2025063	02    19     21    22    28    30    01
2025064	02    10     13    22    29    33    16
2025065	06    10     13    14    15    20    11
2025066	06    22     24    27    28    30    04
2025067	01    05     10    17    20    22    05
2025068	05    07     08    19    20    31    07
2025069	02    04     19    23    27    30    05
2025070	02    03     15    21    22    33    06
2025071	01    12     18    23    25    28    07
2025072	02    14     17    25    27    29    05
2025073	02    07     10    27    30    33    11
2025074	03    04     12    20    32    33    13
2025075	10    12     14    19    20    21    15
2025076	02    06     09    12    14    30    08
2025077	04    07     08    15    20    21    15
2025078	06    15     17    30    32    33    14
2025079	08    11     14    15    30    32    05
2025080	03    07     08    10    16    19    05
2025081	03    06     18    20    23    28    05
2025082	04    06     09    14    32    33    11
2025083	10    15     16    17    27    29    12
2025084	06    08     10    14    24    33    15
2025085	11    14     15    18    21    24    13
2025086	02    06     08    10    17    24    06
2025087	02    06     14    15    24    26    08
2025088	01    03     13    18    21    25    06
2025089	04    06     08    18    31    33    05
2025090	06    11     12    21    27    28    15
2025091	03    04     17    19    25    27    14
2025092	02    11     14    17    23    24    12
2025093	09    11     12    24    25    26    10
2025094	11    13     17    19    23    29    16
2025095	15    16     22    23    26    32    04
2025096	07    09     11    12    16    29    15
2025097	03    05     16    23    26    31    14
2025098	05    08     13    17    18    29    02
2025099	09    11     15    17    22    26    14
2025100	12    16     17    25    30    31    16
2025101	05    08     09    10    16    21    05
2025102	04    09     16    17    18    31    07
2025103	13    16     21    25    28    31    16
2025104	02    05     15    16    24    32    16
2025105	04    07     18    24    26    28    08
2025106	04    05     17    22    26    30    04
2025107	02    03     10    15    25    33    13
2025108	01    09     14    17    22    33    07
2025109	05    06     09    17    18    31    03
2025110	01    05     11    14    16    19    08
2025111	09    14     18    28    31    33    12
2025112	03    09     11    13    20    32    02
2025113	08    10     13    15    24    31    16
2025114	01    20     21    25    26    27    10
2025115	02    03     08    19    24    30    02
2025116	02    04     08    24    28    31    09
2025117	06    08     17    20    25    33    10
2025118	01    10     11    16    24    26    03
2025119	06    09     23    26    28    32    11
2025120	01    02     04    07    13    32    07
2025121	06    08     10    25    29    30    08
2025122	16    18     19    20    25    31    13
2025123	07    09     23    24    25    26    10
2025124	01    02     18    19    21    33    13
2025125	03    09     12    13    26    32    09
2025126	02    12     13    16    19    25    10
2025127	03    09     15    17    19    28    03
2025128	02    10     18    19    24    27    01
2025129	03    04     07    13    20    30    03
2025130	01    05     08    14    19    23    06
2025131	03    13     14    18    24    31    03
2025132	04    08     10    21    23    32    11
2025133	05    14     17    19    20    33    07
2025134	03    05     09    13    26    29    12
2025135	01    02     05    09    25    32    10
2025136	08    10     14    23    28    32    12
2025137	02    08     11    23    27    29    05
2025138	10    13     14    23    24    27    15
2025139	02    05     17    22    30    33    06
2025140	01    03     04    12    18    24    05
2025141	02    04     05    10    12    13    06
2025142	02    13     15    23    27    31    16
2025143	02    09     12    13    15    24    03
2025144	01    08     15    20    26    33    13
2025145	11    12     15    18    25    32    14
2025146	05    07     12    24    26    28    02
2025147	01    03     05    08    22    33    08
2025148	03    04     09    10    15    22    16
2025149	01    02     04    06    22    30    10
2025150	06    13     17    19    24    31    08
2025151	08    09     14    22    28    30    04
2026001	02    06     11    12    13    33    15
2026002	01    05     07    18    30    32    02
2026003	05    06     09    21    28    30    16
2026004	03    07     08    09    18    32    10
2026005	01    20     22    27    30    33    10
`;

export const MOCK_HISTORY: Record<LotteryType, LotteryRecord[]> = {
  [LotteryType.DALETOU]: [
    { issue: '25011', redBalls: [3, 6, 7, 11, 27], blueBalls: [2, 8], date: '2025-01-27' },
    { issue: '25010', redBalls: [5, 21, 28, 30, 32], blueBalls: [7, 12], date: '2025-01-25' },
    { issue: '25009', redBalls: [3, 19, 21, 30, 32], blueBalls: [6, 9], date: '2025-01-22' },
    { issue: '25008', redBalls: [1, 5, 7, 13, 35], blueBalls: [5, 12], date: '2025-01-20' },
    { issue: '25007', redBalls: [15, 22, 23, 25, 31], blueBalls: [1, 9], date: '2025-01-18' },
    { issue: '25006', redBalls: [3, 4, 13, 19, 35], blueBalls: [3, 10], date: '2025-01-15' },
    { issue: '25005', redBalls: [5, 6, 8, 31, 32], blueBalls: [9, 11], date: '2025-01-13' },
    { issue: '25004', redBalls: [2, 5, 9, 13, 33], blueBalls: [1, 7], date: '2025-01-11' },
    { issue: '25003', redBalls: [10, 25, 30, 32, 34], blueBalls: [4, 10], date: '2025-01-08' },
    { issue: '25002', redBalls: [19, 21, 22, 28, 32], blueBalls: [6, 9], date: '2025-01-06' },
    { issue: '25001', redBalls: [5, 8, 16, 17, 27], blueBalls: [4, 7], date: '2025-01-04' },
    { issue: '24152', redBalls: [1, 2, 7, 8, 31], blueBalls: [2, 10], date: '2024-12-30' },
    { issue: '24151', redBalls: [5, 12, 17, 19, 35], blueBalls: [10, 11], date: '2024-12-28' },
    { issue: '24150', redBalls: [4, 11, 23, 25, 34], blueBalls: [5, 7], date: '2024-12-25' },
    { issue: '24149', redBalls: [2, 5, 16, 18, 22], blueBalls: [7, 9], date: '2024-12-23' },
  ],
  [LotteryType.SSQ]: parseLotteryData(SSQ_RAW_DATA),
  [LotteryType.HAPPY8]: [
    { issue: '2025027', redBalls: [1, 9, 10, 12, 14, 16, 19, 24, 28, 35, 38, 40, 49, 53, 56, 58, 64, 67, 71, 77], date: '2025-01-27' },
    { issue: '2025026', redBalls: [4, 11, 12, 13, 17, 20, 23, 33, 40, 43, 44, 50, 53, 60, 63, 65, 67, 68, 72, 80], date: '2025-01-26' },
    { issue: '2025025', redBalls: [2, 3, 5, 7, 12, 13, 23, 26, 29, 39, 43, 44, 48, 60, 62, 63, 64, 74, 77, 79], date: '2025-01-25' },
    { issue: '2025024', redBalls: [1, 7, 10, 12, 16, 21, 25, 26, 29, 30, 33, 34, 36, 37, 41, 53, 71, 72, 73, 75], date: '2025-01-24' },
    { issue: '2025023', redBalls: [5, 6, 7, 8, 13, 17, 21, 25, 32, 33, 36, 41, 46, 55, 59, 62, 68, 70, 74, 76], date: '2025-01-23' },
    { issue: '2025022', redBalls: [3, 6, 8, 11, 14, 15, 20, 25, 26, 28, 39, 49, 54, 56, 57, 61, 63, 66, 76, 77], date: '2025-01-22' },
    { issue: '2025021', redBalls: [6, 8, 10, 11, 13, 14, 27, 30, 32, 33, 35, 38, 47, 50, 52, 56, 62, 65, 71, 76], date: '2025-01-21' },
    { issue: '2025020', redBalls: [1, 2, 5, 6, 11, 14, 21, 26, 37, 40, 41, 43, 45, 50, 57, 60, 61, 67, 73, 78], date: '2025-01-20' },
    { issue: '2025019', redBalls: [2, 3, 12, 16, 18, 21, 24, 33, 45, 46, 50, 53, 55, 62, 68, 70, 71, 72, 79, 80], date: '2025-01-19' },
    { issue: '2025018', redBalls: [5, 9, 13, 22, 23, 24, 28, 31, 33, 34, 37, 45, 46, 48, 50, 52, 55, 63, 72, 76], date: '2025-01-18' },
    { issue: '2025017', redBalls: [1, 3, 7, 13, 18, 27, 31, 32, 37, 43, 47, 48, 51, 52, 53, 61, 64, 65, 73, 80], date: '2025-01-17' },
    { issue: '2025016', redBalls: [1, 2, 11, 15, 16, 19, 23, 32, 43, 45, 46, 48, 53, 55, 57, 62, 68, 77, 79, 80], date: '2025-01-16' },
  ],
  [LotteryType.QXC]: [
    { issue: '25012', redBalls: [6, 2, 9, 4, 1, 8], blueBalls: [11], date: '2025-01-28' },
    { issue: '25011', redBalls: [3, 7, 0, 5, 2, 9], blueBalls: [5], date: '2025-01-26' },
    { issue: '25010', redBalls: [1, 8, 4, 2, 6, 3], blueBalls: [12], date: '2025-01-24' },
    { issue: '25009', redBalls: [9, 5, 1, 8, 7, 0], blueBalls: [3], date: '2025-01-21' },
    { issue: '25008', redBalls: [2, 4, 6, 3, 9, 1], blueBalls: [8], date: '2025-01-19' },
  ]
};

export const DEFAULT_CONFIG = {
  monteCarloIterations: 10000,
  lstmEpochs: 100,
  recentWeight: 0.7,
  useCRF: true,
};